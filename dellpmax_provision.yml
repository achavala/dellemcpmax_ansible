- name: Provision Storage For DB Cluster
  hosts: localhost
  connection: local
  no_log: True
  vars:
        unispherehost: 'ipaddress'
        universion: "90"
        verifycert: False
        user: 'smc'
        password: 'smc'
        sgname: 'Payroll_DB'

  tasks:
  - name: Create New Storage Group and add data volumes
    dellpmax_createsg:
        unispherehost: "{{unispherehost}}"
        universion: "{{universion}}"
        verifycert: "{{verifycert}}"
        user: "{{user}}"
        password: "{{password}}"
        sgname: "{sgname}"
        array_id: '000197600156'
        srp_id:	'SRP_1'
        slo: 'Diamond'
        workload: None
        num_vols: 4
        vol_size:  30
        cap_unit: 'GB'
        volumeIdentifier: 'Data'
  - name: Add REDO Volumes to Storage Group
    dellpmax_addvolume:
        unispherehost: "{{unispherehost}}"
        universion: "{{universion}}"
        verifycert: "{{verifycert}}"
        user: "{{user}}"
        password: "{{password}}"
        sgname: "{sgname}"
        array_id: '000197600156'
        num_vols: 1
        vol_size:  20
        cap_unit: 'GB'
        volumeIdentifier: 'REDO'
  - name: Add FRA Volume to Storage Group
    dellpmax_addvolume:
        unispherehost: "{{unispherehost}}"
        universion: "{{universion}}"
        verifycert: "{{verifycert}}"
        user: "{{user}}"
        password: "{{password}}"
        sgname: "{sgname}"
        array_id: '000197600156'
        num_vols: 10
        vol_size:  2
        cap_unit: 'GB'
        volumeIdentifier: 'FRA'
  - name: Add TEMP Volume to Storage Group
    dellpmax_addvolume:
        unispherehost: 'ipaddress or hostname'
        universion: 90
        verifycert: False
        user: 'smc'
        password: 'smc'
        sgname: "{sgname}"
        array_id: '000197600156'
        num_vols: 1
        vol_size:  8
        cap_unit: 'GB'
        volumeIdentifier: 'TEMP'
